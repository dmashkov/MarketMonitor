# üìß Email –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Supabase

**–î–∞—Ç–∞:** 2024-12-04
**–í–µ—Ä—Å–∏—è:** 0.2.0
**–°—Ç–∞—Ç—É—Å:** ‚ÑπÔ∏è –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üîî –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å Email

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–ª–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
```
‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ë–ï–ó email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
‚úÖ –í—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É
‚úÖ Email –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
‚ùå Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è (–Ω–µ—Ç SMTP)
```

### –ü–æ—á–µ–º—É –ø–∏—Å—å–º–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è?

Supabase —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å SMTP —Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º:
1. **Confirmation email** - –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
2. **Password reset email** - –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–∞—Ä–æ–ª—è
3. **Custom emails** - –∫–∞—Å—Ç–æ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–±—É–¥—É—â–∏–µ)

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —ç—Ç–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è (—É–∂–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö).

---

## üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Email –¥–ª—è Production

### –í–∞—Ä–∏–∞–Ω—Ç 1: Supabase Email Service (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π)

1. –û—Ç–∫—Ä–æ–π—Å—è –≤ Supabase Dashboard
2. **Settings** ‚Üí **Email**
3. –†–∞–∑–¥–µ–ª **"Mailer"**
4. –í—ã–±–µ—Ä–∏ **"Supabase"** (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
5. –°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–æ–º–µ–Ω–æ–≤

### –í–∞—Ä–∏–∞–Ω—Ç 2: Custom SMTP (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å SMTP —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–í–∞—Ä–∏–∞–Ω—Ç A: Gmail**
```
SMTP Host:     smtp.gmail.com
SMTP Port:     587
SMTP User:     –≤–∞—à_email@gmail.com
SMTP Password: [App Password, –Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä–æ–ª—å!]
```

[–°–æ–∑–¥–∞—Ç—å App Password –¥–ª—è Gmail](https://myaccount.google.com/apppasswords)

**–í–∞—Ä–∏–∞–Ω—Ç B: SendGrid**
```
SMTP Host:     smtp.sendgrid.net
SMTP Port:     587
SMTP User:     apikey
SMTP Password: SG.xxxxxxxxxxxxxxxxx
```

[–°–æ–∑–¥–∞—Ç—å API Key –≤ SendGrid](https://app.sendgrid.com/settings/api_keys)

**–í–∞—Ä–∏–∞–Ω—Ç C: Mailgun**
```
SMTP Host:     smtp.mailgun.org
SMTP Port:     587
SMTP User:     postmaster@yourdomain.com
SMTP Password: [–ò–∑ Mailgun console]
```

#### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –≤ Supabase

1. –û—Ç–∫—Ä–æ–π https://app.supabase.com ‚Üí —Ç–≤–æ–π –ø—Ä–æ–µ–∫—Ç
2. **Settings** ‚Üí **Email**
3. –†–∞–∑–¥–µ–ª **"Mailer"** ‚Üí –≤—ã–±–µ—Ä–∏ **"Custom SMTP"**
4. –ó–∞–ø–æ–ª–Ω–∏:
   - **SMTP Host:** smtp.gmail.com
   - **SMTP Port:** 587
   - **SMTP User:** –≤–∞—à_email@gmail.com
   - **SMTP Password:** [App Password]
   - **SMTP from email:** noreply@example.com (–∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π email)
5. –ö–ª–∏–∫–Ω–∏ **"Test"** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
6. –ï—Å–ª–∏ "‚úÖ Success" - —Å–æ—Ö—Ä–∞–Ω–∏ **"Save"**

---

## üìß Email —à–∞–±–ª–æ–Ω—ã

–°—É—Ç—å —à–∞–±–ª–æ–Ω–æ–≤ –≤ **Settings** ‚Üí **Email** ‚Üí **Templates**:

### 1. Confirmation Link Template
–ü–∏—Å—å–º–æ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å —Å—Å—ã–ª–∫–æ–π –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
```
{{ .ConfirmationURL }}  - —Å—Å—ã–ª–∫–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
{{ .Email }}            - email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
{{ .Data }}             - –∫–∞—Å—Ç–æ–º–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

**–ü—Ä–∏–º–µ—Ä:**
```html
<p>–ü—Ä–∏–≤–µ—Ç, {{ .Email }}!</p>
<p><a href="{{ .ConfirmationURL }}">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å email</a></p>
```

### 2. Reset Password Template
–ü–∏—Å—å–º–æ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
```
{{ .RecoveryURL }}  - —Å—Å—ã–ª–∫–∞ –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è
{{ .Email }}        - email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### 3. Magic Link Template
–ü–∏—Å—å–º–æ –¥–ª—è –±–µ—Å–ø–∞—Ä–æ–ª–µ–≤–æ–≥–æ –≤—Ö–æ–¥–∞ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Email –ª–æ–∫–∞–ª—å–Ω–æ

### –°–ø–æ—Å–æ–± 1: –ë–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏ (—Ç–µ–∫—É—â–∏–π)
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–µ–π—á–∞—Å - –ø–∏—Å—å–º–∞ –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è

### –°–ø–æ—Å–æ–± 2: Mailhog (–ª–æ–∫–∞–ª—å–Ω—ã–π SMTP —Å–µ—Ä–≤–µ—Ä)

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
# Windows (—Å Chocolatey)
choco install mailhog

# –ò–ª–∏ —Å–∫–∞—á–∞—Ç—å –±–∏–Ω–∞—Ä–Ω–∏–∫ —Å https://github.com/mailhog/MailHog/releases
```

**–ó–∞–ø—É—Å–∫:**
```bash
MailHog
# –û—Ç–∫—Ä–æ–µ—Ç—Å—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ http://localhost:1025
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Supabase (–ª–æ–∫–∞–ª—å–Ω–æ):**
```
SMTP Host:     localhost
SMTP Port:     1025
SMTP User:     (–ø—É—Å—Ç–æ)
SMTP Password: (–ø—É—Å—Ç–æ)
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –û—Ç–∫—Ä–æ–π http://localhost:1025
3. –¢–∞–º –±—É–¥—É—Ç –≤—Å–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–∏—Å—å–º–∞

---

## ‚úâÔ∏è –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–∏—Å–µ–º

–ö–æ–≥–¥–∞ –≤ –±—É–¥—É—â–µ–º –Ω—É–∂–Ω—ã –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø–∏—Å—å–º–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–ø–æ–≤–µ—â–µ–Ω–∏—è):

```typescript
// –í Edge Function –∏–ª–∏ –≤ –∫–æ–¥–µ
import { Resend } from 'resend';

const resend = new Resend(process.env.RESEND_API_KEY);

await resend.emails.send({
  from: 'noreply@example.com',
  to: user.email,
  subject: '–ù–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ –Ω–∞ —Ä—ã–Ω–∫–µ',
  html: '<p>–ü–æ—è–≤–∏–ª–æ—Å—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ...</p>'
});
```

---

## üéØ –î–ª—è —Ç–µ–∫—É—â–µ–≥–æ MVP

**Email - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è:**
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- ‚úÖ –í—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É
- ‚úÖ –ü–∏—Å—å–º–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è (–Ω–æ –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è)

**–î–æ–±–∞–≤–∏—Ç—å Email –ø–æ—Ç–æ–º:**
- Phase 4 –∏–ª–∏ Phase 5
- –ö–æ–≥–¥–∞ –¥–æ–±–∞–≤–∏–º Edge Functions

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è Production

–ü–µ—Ä–µ–¥ –≤—ã–∫–∞—Ç–æ–º –Ω–∞ Production:

- [ ] –í—ã–±—Ä–∞—Ç—å SMTP –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (Gmail, SendGrid, Mailgun)
- [ ] –ü–æ–ª—É—á–∏—Ç—å SMTP —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- [ ] –î–æ–±–∞–≤–∏—Ç—å SMTP –≤ Supabase Settings
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –ø–∏—Å—å–º–∞
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Email —à–∞–±–ª–æ–Ω—ã
- [ ] –í–∫–ª—é—á–∏—Ç—å "Require email confirmation" –æ–±—Ä–∞—Ç–Ω–æ
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ –≤—Ö–æ–¥ –Ω–∞ production

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Supabase Email Docs](https://supabase.com/docs/guides/auth/auth-email)
- [Gmail App Passwords](https://myaccount.google.com/apppasswords)
- [SendGrid API Keys](https://app.sendgrid.com/settings/api_keys)
- [Mailhog GitHub](https://github.com/mailhog/MailHog)
- [SMTP Port List](https://en.wikipedia.org/wiki/Comparison_of_email_clients)

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π —Ç–µ–∫—É—â—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É (–±–µ–∑ email)

### –î–ª—è Staging (–ø–µ—Ä–µ–¥ production)
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π Mailhog –∏–ª–∏ Gmail SMTP
‚úÖ –¢–µ—Å—Ç–∏—Ä—É–π –æ—Ç–ø—Ä–∞–≤–∫—É –ø–∏—Å–µ–º
‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π —à–∞–±–ª–æ–Ω—ã

### –î–ª—è Production
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π SendGrid –∏–ª–∏ Mailgun (–Ω–∞–¥–µ–∂–Ω–µ–µ)
‚úÖ –ù–∞—Å—Ç—Ä–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–æ–º–µ–Ω
‚úÖ –í–∫–ª—é—á–∏ "Require email confirmation"
‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä—å –¥–æ—Å—Ç–∞–≤–ª—è–µ–º–æ—Å—Ç—å –ø–∏—Å–µ–º

---

**–°–æ–∑–¥–∞–Ω–æ:** 2024-12-04
**–í–µ—Ä—Å–∏—è:** 0.2.0
**–°—Ç–∞—Ç—É—Å:** ‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç

**Email - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ MVP. –î–æ–±–∞–≤—å –ø–æ—Ç–æ–º –µ—Å–ª–∏ –Ω—É–∂–Ω–æ!** üìß
