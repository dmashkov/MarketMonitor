# üìã Phase 3 Extended - –†–µ–∑—é–º–µ –ò–∑–º–µ–Ω–µ–Ω–∏–π

**–î–∞—Ç–∞:** 2024-12-05
**–í–µ—Ä—Å–∏—è:** 0.4.0
**–°—Ç–∞—Ç—É—Å:** –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ ‚úÖ

---

## üéØ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è Database Schema

**–°–æ–∑–¥–∞–Ω—ã 2 –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏:**

#### Migration 005: `sources_and_segments.sql`
- **5 –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü:**
  - `segments` - —Å–µ–≥–º–µ–Ω—Ç—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è (RAC, VRF, Chiller, AHU, –∏ —Ç.–¥.)
  - `geographies` - –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –∑–æ–Ω—ã (—Å—Ç—Ä–∞–Ω–∞ ‚Üí —Ä–µ–≥–∏–æ–Ω—ã ‚Üí –≥–æ—Ä–æ–¥–∞)
  - `source_types` - —Ç–∏–ø—ã –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (–¥–∏—Å—Ç—Ä–∏–±—å—é—Ç–æ—Ä, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å, –°–ú–ò, –∏ —Ç.–¥.)
  - `sources` - –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (—Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –∏ —á–∞—Å—Ç–æ—Ç–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏)
  - `source_urls` - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ URL –∞–¥—Ä–µ—Å–∞ –≤–Ω—É—Ç—Ä–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
  - `prompt_segments` - —Å–≤—è–∑—å Many-to-Many –º–µ–∂–¥—É –ø—Ä–æ–º–ø—Ç–∞–º–∏ –∏ —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏

- **–†–∞—Å—à–∏—Ä–µ–Ω—ã 2 —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã:**
  - `events` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è:
    - `source_id` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫
    - `source_url` - –ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª
    - `criticality_level` - —É—Ä–æ–≤–µ–Ω—å –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ (1-5)
    - `segment_id` - —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–µ–≥–º–µ–Ω—Ç
    - `geography_id` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –≥–µ–æ–≥—Ä–∞—Ñ–∏—é
    - `detected_at` - –≤—Ä–µ–º—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è

  - `ai_prompts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è:
    - `segment_id` - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ —Å–µ–≥–º–µ–Ω—Ç
    - `geography_id` - –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    - `search_depth` - –≥–ª—É–±–∏–Ω–∞ –ø–æ–∏—Å–∫–∞ (daily/weekly/monthly)

- **Security:**
  - RLS policies –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü
  - Admin-only –¥–æ—Å—Ç—É–ø –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
  - Read-only –¥–æ—Å—Ç—É–ø –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

- **Performance:**
  - 10+ indexes –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
  - Update triggers –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü

#### Migration 006: `seed_sources_data.sql`

**15+ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**

1. **–î–∏—Å—Ç—Ä–∏–±—å—é—Ç–æ—Ä—ã (4):**
   - –†—É—Å–∫–ª–∏–º–∞—Ç (priority: 10)
   - –î–∞–∏—á–∏ (priority: 9)
   - –ê–Ø–ö (priority: 9)
   - –ë—Ä–∏–∑ (priority: 8)

2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏ (5):**
   - MIDEA Russia (priority: 10)
   - GREE Russia (priority: 10)
   - HAIER Russia (priority: 9)
   - TCL Russia (priority: 9)
   - HISENSE Russia (priority: 9)

3. **–î–µ–ª–æ–≤—ã–µ –°–ú–ò (4):**
   - Forbes –†–æ—Å—Å–∏—è (priority: 8)
   - –í–µ–¥–æ–º–æ—Å—Ç–∏ (priority: 9)
   - –ö–æ–º–º–µ—Ä—Å–∞–Ω—Ç—ä (priority: 9)
   - –†–ë–ö (priority: 8)

4. **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ (2):**
   - –ê–í–û–ö (priority: 10)
   - –ê–ü–ò–ö (priority: 10)

**8 —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è:**
- RAC (Room Air Conditioner) - –±—ã—Ç–æ–≤—ã–µ –∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä—ã
- VRF (Variable Refrigerant Flow) - –º—É–ª—å—Ç–∏–∑–æ–Ω–∞–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
- Chiller - —á–∏–ª–ª–µ—Ä—ã
- AHU (Air Handling Unit) - –ø—Ä–∏—Ç–æ—á–Ω–æ-–≤—ã—Ç—è–∂–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- –ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–µ —Ç–µ–ø–ª–æ–≤–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
- –¢–µ–ø–ª–æ–≤—ã–µ –Ω–∞—Å–æ—Å—ã
- –í–µ–Ω—Ç–∏–ª—è—Ü–∏—è
- –•–æ–ª–æ–¥–∏–ª—å–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ

**–ì–µ–æ–≥—Ä–∞—Ñ–∏—è –†–§:**
- –†–æ—Å—Å–∏—è (—Å—Ç—Ä–∞–Ω–∞)
- 7 —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω—ã—Ö –æ–∫—Ä—É–≥–æ–≤ (–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π, –°–µ–≤–µ—Ä–æ-–ó–∞–ø–∞–¥–Ω—ã–π, –Æ–∂–Ω—ã–π, –ü—Ä–∏–≤–æ–ª–∂—Å–∫–∏–π, –£—Ä–∞–ª—å—Å–∫–∏–π, –°–∏–±–∏—Ä—Å–∫–∏–π, –î–∞–ª—å–Ω–µ–≤–æ—Å—Ç–æ—á–Ω—ã–π)
- 4 –∫—Ä—É–ø–Ω—ã—Ö –≥–æ—Ä–æ–¥–∞ (–ú–æ—Å–∫–≤–∞, –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥, –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫)

**3 –ø—Ä–∏–º–µ—Ä–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤:**
- "Daily RAC –ê–∫—Ü–∏–∏" - –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –ø–æ–∏—Å–∫ –∞–∫—Ü–∏–π –Ω–∞ –±—ã—Ç–æ–≤—ã–µ –∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä—ã
- "Weekly VRF –ü—Ä–æ–µ–∫—Ç—ã" - –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –Ω–∞ VRF —Å–∏—Å—Ç–µ–º—ã
- "Monthly Market Trends" - –µ–∂–µ–º–µ—Å—è—á–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä—ã–Ω–∫–∞

---

### 2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã TypeScript —Ç–∏–ø—ã

**–§–∞–π–ª:** `frontend/src/shared/types/index.ts`

**–ù–æ–≤—ã–µ —Ç–∏–ø—ã (200+ —Å—Ç—Ä–æ–∫):**

```typescript
// –°–µ–≥–º–µ–Ω—Ç—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
export interface SegmentEntity {
  id: string;
  name: string;
  code: string; // "RAC", "VRF", "CHILLER", etc.
  description: string | null;
  created_at: string;
  updated_at: string;
}

// –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –∑–æ–Ω—ã
export interface Geography {
  id: string;
  name: string;
  code: string; // "RU", "RU_MOW", etc.
  type: 'country' | 'region' | 'city';
  parent_id: string | null;
  created_at: string;
  updated_at: string;
}

// –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
export interface Source {
  id: string;
  name: string;
  source_type_id: string;
  website_url: string | null;
  telegram_channel: string | null;
  description: string | null;
  is_active: boolean;
  priority: number; // 1-10
  check_frequency: 'daily' | 'weekly' | 'monthly';
  last_checked_at: string | null;
  metadata: Record<string, unknown>;
  created_at: string;
  updated_at: string;
  created_by: string | null;
}

// –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ URL
export interface SourceUrl {
  id: string;
  source_id: string;
  url: string;
  url_type: 'news' | 'products' | 'blog' | 'press-release';
  description: string | null;
  is_active: boolean;
  check_frequency: 'daily' | 'weekly' | 'monthly';
  last_checked_at: string | null;
  created_at: string;
  updated_at: string;
}

// –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
export interface MarketEvent {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...

  // –ù–û–í–´–ï –ü–û–õ–Ø:
  source_id: string | null;
  criticality_level: 1 | 2 | 3 | 4 | 5;
  segment_id: string | null;
  geography_id: string | null;
  detected_at: string;
}

// –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã
export interface AIPrompt {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...

  // –ù–û–í–´–ï –ü–û–õ–Ø:
  segment_id: string | null;
  geography_id: string | null;
  search_depth: 'daily' | 'weekly' | 'monthly';
}
```

**–¢–∏–ø—ã –¥–ª—è —Å–≤—è–∑–µ–π:**
- `MarketEventWithRelations` - —Å–æ–±—ã—Ç–∏–µ —Å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ source, segment, geography
- `AIPromptWithRelations` - –ø—Ä–æ–º–ø—Ç —Å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ segment, geography
- `SourceWithType` - –∏—Å—Ç–æ—á–Ω–∏–∫ —Å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º source_type
- `SourceUrlWithSource` - URL —Å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º source

---

### 3. ‚úÖ –°–æ–∑–¥–∞–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π ROADMAP.md

**–§–∞–π–ª:** `ROADMAP.md` (2500+ —Å—Ç—Ä–æ–∫)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:**

- **Phase 3: Source Management & Specialized Prompts** (2-3 –Ω–µ–¥–µ–ª–∏)
  - Backend: Edge Functions –¥–ª—è API
  - Frontend: Admin UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
  - Specialized Prompts Library

- **Phase 4: Event Criticality & Source Tracking** (2 –Ω–µ–¥–µ–ª–∏)
  - 5-—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏
  - Event Source Tracking
  - Auto-Criticality Detection —á–µ—Ä–µ–∑ AI

- **Phase 5: Multi-Depth Search System** (2-3 –Ω–µ–¥–µ–ª–∏)
  - Daily –ø–æ–∏—Å–∫–∏ (–∞–∫—Ü–∏–∏, —Å–ø–µ—Ü–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
  - Weekly –ø–æ–∏—Å–∫–∏ (–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, —Å–æ–≥–ª–∞—à–µ–Ω–∏—è)
  - Monthly –ø–æ–∏—Å–∫–∏ (—Ç—Ä–µ–Ω–¥—ã, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞)
  - Search Run Analytics

- **Phase 6: Data Analysis & Intelligence** (3-4 –Ω–µ–¥–µ–ª–∏)
  - Historical Data Analysis
  - AI-Powered Summarization
  - Duplicate Detection & Merging

- **Phase 7: Telegram Integration** (1-2 –Ω–µ–¥–µ–ª–∏)
  - Telegram Bot –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞–Ω–∞–ª–æ–≤
  - Webhook –¥–ª—è –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
  - Admin Management

**–ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞:**
- Phase 3: 15+ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, 10+ –ø—Ä–æ–º–ø—Ç–æ–≤, 20+ —Å–æ–±—ã—Ç–∏–π/–¥–µ–Ω—å
- Phase 5: 30+ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, 25+ –ø—Ä–æ–º–ø—Ç–æ–≤, 50+ —Å–æ–±—ã—Ç–∏–π/–¥–µ–Ω—å
- Phase 7: 60+ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, 35+ –ø—Ä–æ–º–ø—Ç–æ–≤, 100+ —Å–æ–±—ã—Ç–∏–π/–¥–µ–Ω—å

---

### 4. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω DEVELOPMENT_STATUS.md

**–§–∞–π–ª:** `DEVELOPMENT_STATUS.md`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏—è: 0.3.0 ‚Üí 0.4.0
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ Phase 3-7
- –û–±–Ω–æ–≤–ª–µ–Ω—ã progress bars
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Ä–∞–∑–±–∏–≤–∫–æ–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏

**Overall Progress:**
```
Phase 1: Foundation                   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚úÖ
Phase 2: MVP Auth+Events              ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚úÖ
Phase 3: Source Management            ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  40% üöÄ
Phase 4: Criticality & Tracking       ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë   0% üìã
Phase 5: Multi-Depth Search           ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë   0% üìã
Phase 6: Data Analysis & AI           ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë   0% üí°
Phase 7: Telegram Integration         ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë   0% üí°

EXTENDED MVP:             ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 40% üöÄ
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ –®–∞–≥–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: Source Management Backend (1 –Ω–µ–¥–µ–ª—è)

**–°–æ–∑–¥–∞—Ç—å Edge Functions:**

1. `sources-api` (2-3 –¥–Ω—è)
   - GET /sources - —Å–ø–∏—Å–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
   - POST /sources - —Å–æ–∑–¥–∞–Ω–∏–µ (admin only)
   - PATCH /sources/:id - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - DELETE /sources/:id - —É–¥–∞–ª–µ–Ω–∏–µ

2. `source-urls-api` (1 –¥–µ–Ω—å)
   - CRUD –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö URL

3. `segments-api` (1 –¥–µ–Ω—å)
   - GET /segments - —Å–ø–∏—Å–æ–∫ —Å–µ–≥–º–µ–Ω—Ç–æ–≤
   - POST /segments - —Å–æ–∑–¥–∞–Ω–∏–µ

4. `geographies-api` (1 –¥–µ–Ω—å)
   - GET /geographies - —Å–ø–∏—Å–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
   - GET /geographies/:id/children - –¥–æ—á–µ—Ä–Ω–∏–µ –∑–æ–Ω—ã

5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1 –¥–µ–Ω—å)
   - Postman –∫–æ–ª–ª–µ–∫—Ü–∏—è
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ RLS policies

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: Source Management UI (1 –Ω–µ–¥–µ–ª—è)

**–°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å:** `modules/admin/sources/`

1. **SourcesManager.tsx** (2 –¥–Ω—è)
   - –¢–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
   - –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫
   - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏

2. **SourceFormModal.tsx** (1 –¥–µ–Ω—å)
   - –§–æ—Ä–º–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

3. **SourceUrlsManager.tsx** (1 –¥–µ–Ω—å)
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ URL

4. **Hooks** (1 –¥–µ–Ω—å)
   - useSources(), useSourceUrls(), useSegments(), useGeographies()

5. **Integration** (1 –¥–µ–Ω—å)
   - –î–æ–±–∞–≤–∏—Ç—å –≤–∫–ª–∞–¥–∫—É "Sources" –≤ AdminPanel

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: Specialized Prompts Library (3-4 –¥–Ω—è)

**–†–∞—Å—à–∏—Ä–∏—Ç—å –º–æ–¥—É–ª—å:** `modules/admin/prompts/`

1. –û–±–Ω–æ–≤–∏—Ç—å PromptLibrary.tsx (1 –¥–µ–Ω—å)
2. –û–±–Ω–æ–≤–∏—Ç—å PromptFormModal.tsx (1 –¥–µ–Ω—å)
3. –°–æ–∑–¥–∞—Ç—å PromptTemplates.tsx (1 –¥–µ–Ω—å)
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1 –¥–µ–Ω—å)

---

## üìä –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

### –°–æ–∑–¥–∞–Ω—ã –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã (3):
```
‚úÖ supabase/migrations/005_sources_and_segments.sql    (600+ —Å—Ç—Ä–æ–∫)
‚úÖ supabase/migrations/006_seed_sources_data.sql       (400+ —Å—Ç—Ä–æ–∫)
‚úÖ ROADMAP.md                                          (2500+ —Å—Ç—Ä–æ–∫)
‚úÖ PHASE3_EXTENDED_SUMMARY.md                          (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
```

### –ò–∑–º–µ–Ω–µ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã (2):
```
‚úÖ frontend/src/shared/types/index.ts      (+200 —Å—Ç—Ä–æ–∫ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤)
‚úÖ DEVELOPMENT_STATUS.md                   (–æ–±–Ω–æ–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ Phase 3-7)
```

---

## üîë –ö–ª—é—á–µ–≤—ã–µ –ö–æ–Ω—Ü–µ–ø—Ü–∏–∏

### 1. –°–∏—Å—Ç–µ–º–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (5 —É—Ä–æ–≤–Ω–µ–π)
```
Source Types ‚Üí Sources ‚Üí Source URLs ‚Üí Events
     ‚Üì             ‚Üì          ‚Üì
 6 —Ç–∏–ø–æ–≤       15+ —à—Ç     7+ URL
```

### 2. –°–µ–≥–º–µ–Ω—Ç—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
```
RAC ‚Üí VRF ‚Üí Chiller ‚Üí AHU ‚Üí –ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–µ ‚Üí –¢–µ–ø–ª–æ–≤—ã–µ –Ω–∞—Å–æ—Å—ã ‚Üí –í–µ–Ω—Ç–∏–ª—è—Ü–∏—è ‚Üí –•–æ–ª–æ–¥–∏–ª—å–Ω–æ–µ
```

### 3. –ì–µ–æ–≥—Ä–∞—Ñ–∏—è (3 —É—Ä–æ–≤–Ω—è)
```
–†–æ—Å—Å–∏—è ‚Üí –§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–µ –æ–∫—Ä—É–≥–∞ (7) ‚Üí –ì–æ—Ä–æ–¥–∞ (4+)
```

### 4. –ì–ª—É–±–∏–Ω–∞ –ø–æ–∏—Å–∫–∞
```
Daily (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ)   ‚Üí –ê–∫—Ü–∏–∏, —Å–ø–µ—Ü–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è      ‚Üí –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
Weekly (–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ) ‚Üí –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã, —Å–æ–≥–ª–∞—à–µ–Ω–∏—è       ‚Üí –®–∏—Ä–æ–∫–∏–µ —Å–æ–±—ã—Ç–∏—è
Monthly (–µ–∂–µ–º–µ—Å—è—á–Ω–æ) ‚Üí –¢—Ä–µ–Ω–¥—ã, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –æ–±–∑–æ—Ä—ã   ‚Üí –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ insights
```

### 5. –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏–π (5 —É—Ä–æ–≤–Ω–µ–π)
```
1 = –ù–∏–∑–∫–∞—è      ‚Üí –†—É—Ç–∏–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏
2 = –°—Ä–µ–¥–Ω—è—è     ‚Üí –õ–æ–∫–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
3 = –û–±—ã—á–Ω–∞—è     ‚Üí –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏
4 = –í—ã—Å–æ–∫–∞—è     ‚Üí –ö—Ä—É–ø–Ω—ã–µ —Å–¥–µ–ª–∫–∏, –ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–∞
5 = –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è ‚Üí –ó–∞–ø—É—Å–∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞, –º–µ–≥–∞-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, –∑–∞–∫–æ–Ω—ã
```

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç "Daily RAC –ê–∫—Ü–∏–∏"
```typescript
{
  name: "Daily RAC –ê–∫—Ü–∏–∏",
  segment_id: "uuid-of-RAC-segment",
  geography_id: "uuid-of-Russia",
  search_depth: "daily",
  prompt_text: "–ù–∞–π–¥–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∞–∫—Ü–∏–∏ –Ω–∞ –±—ã—Ç–æ–≤—ã–µ –∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä—ã...",
  sources: ["–†—É—Å–∫–ª–∏–º–∞—Ç", "–î–∞–∏—á–∏", "–ê–Ø–ö", "MIDEA", "GREE"]
}
```

### –ü—Ä–∏–º–µ—Ä 2: –ö—Ä–∏—Ç–∏—á–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ
```typescript
{
  title: "MIDEA –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ VRF —Å–∏—Å—Ç–µ–º –≤ –†–æ—Å—Å–∏–∏",
  criticality_level: 5, // –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï
  source_id: "uuid-of-MIDEA",
  source_url: "https://midea.ru/news/import-substitution-2024",
  segment_id: "uuid-of-VRF",
  geography_id: "uuid-of-Russia",
  detected_at: "2024-12-05T10:30:00Z"
}
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:**
- `ROADMAP.md` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω Phase 3-7 (2500+ —Å—Ç—Ä–æ–∫)
- `DEVELOPMENT_STATUS.md` - —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞
- `docs/architecture.md` - –ø–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∞)

**–î–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**
- Migrations 005-006 - SQL —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
- `frontend/src/shared/types/index.ts` - –≤—Å–µ TypeScript —Ç–∏–ø—ã

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –º–∏–≥—Ä–∞—Ü–∏–π

**–í–ê–ñ–ù–û:** –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –º–∏–≥—Ä–∞—Ü–∏–π –Ω–∞ Supabase:

1. **Backup —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ë–î:**
   ```sql
   -- –í Supabase Dashboard: Settings ‚Üí Backups ‚Üí Create Backup
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ Dev –æ–∫—Ä—É–∂–µ–Ω–∏–∏:**
   ```bash
   # –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Supabase CLI:
   supabase db reset --local
   supabase migration up
   ```

3. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ Production:**
   ```bash
   # –ß–µ—Ä–µ–∑ Supabase Dashboard: Database ‚Üí Migrations ‚Üí New Migration
   # –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ 005 –∏ 006 —Ñ–∞–π–ª–æ–≤
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å RLS policies:**
   ```sql
   -- –í SQL Editor –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
   SELECT * FROM pg_policies WHERE schemaname = 'public';
   ```

---

## üéâ –ò—Ç–æ–≥–æ

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ 6 –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü + 2 —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ
- ‚úÖ 15+ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ 8 —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
- ‚úÖ –ü–æ–ª–Ω–∞—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—è –†–§
- ‚úÖ 10+ –Ω–æ–≤—ã—Ö TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –Ω–∞ 4 —Ñ–∞–∑—ã –≤–ø–µ—Ä–µ–¥ (Phase 3-7)

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:**
–°–æ–∑–¥–∞—Ç—å Backend API (Edge Functions) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ 2-3 –Ω–µ–¥–µ–ª–∏:**
–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ–º–ø—Ç–∞–º–∏ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é Daily/Weekly/Monthly –ø–æ–∏—Å–∫–æ–≤ –ø–æ –≤—Å–µ–º –∫—Ä—É–ø–Ω–µ–π—à–∏–º –∏–≥—Ä–æ–∫–∞–º —Ä—ã–Ω–∫–∞ –∫–ª–∏–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç–µ—Ö–Ω–∏–∫–∏ –†–æ—Å—Å–∏–∏.

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2024-12-05
**–ê–≤—Ç–æ—Ä:** Claude Code + Development Team
**–í–µ—Ä—Å–∏—è:** 1.0
